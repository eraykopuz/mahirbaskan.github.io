<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mahir Saruhan - Okul Başkanlığı Adayı</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
    body {
        font-family: 'Montserrat', sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        background-color: #e8f0ff;
        color: #222;
    }

 h1,h2,h3 { font-weight:700; }
h2,h3 { color:#0055cc; }
header h1, header h3 { color:white; }

    header {
        background: #0055cc;
        color: white;
        padding: 25px 0;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        position: sticky;
        top:0;
        z-index:50;
    }

    header h1 { margin-bottom:0.2em; font-size:2.5em; }

    nav {
        display:flex;
        flex-wrap:wrap;
        justify-content:center;
        padding:10px 5px 0 5px;
    }

    nav button {
        background:white;
        color:#0055cc;
        border:2px solid #0055cc;
        padding:10px 15px;
        margin:5px;
        cursor:pointer;
        border-radius:25px;
        transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
        font-weight:600;
        font-size:0.9em;
        flex-grow:1;
        max-width:45%;
        box-shadow:0 3px 6px rgba(0,0,0,0.1);
    }

    nav button:hover {
        background:#0077ff;
        color:white;
        transform:translateY(-3px);
        box-shadow:0 6px 12px rgba(0,0,0,0.2);
    }

    main {
        padding:30px;
        max-width:960px;
        margin:30px auto;
        background:white;
        border-radius:12px;
        box-shadow:0 8px 25px rgba(0,0,0,0.15);
        min-height:60vh;
        position:relative;
    }

    section { padding:25px 0; border-bottom:1px solid #d0d8ff; }
    section:last-child { border-bottom:none; }

    .hidden { display:none !important; }
    .active { display:block; }

    .table-container { overflow-x:auto; }

    table {
        width:100%;
        border-collapse:collapse;
        border-radius:8px;
        overflow:hidden;
        border:1px solid #cfd8ff;
    }

    th, td { border:1px solid #d0d8ff; padding:15px 12px; text-align:left; }
    th { background-color:#0055cc; color:white; font-weight:600; }
    tr:nth-child(even) { background-color:#f5f9ff; }

    footer { text-align:center; padding:1.5em 0; background:#0055cc; color:white; margin-top:30px; }

    #requests h2, #requests p { text-align:center; }

    #requestForm { display:flex; flex-direction:column; gap:20px; max-width:600px; margin:0 auto; }
    .form-group label { display:block; margin-bottom:8px; font-weight:600; color:#333; }
    .form-group input, .form-group textarea {
        width:100%;
        padding:12px;
        border:1px solid #aac4ff;
        border-radius:10px;
        font-family:inherit;
        font-size:1em;
        transition:border-color 0.3s, box-shadow 0.3s;
        background-color:#f9fbff;
    }
    .form-group input:focus, .form-group textarea:focus {
        outline:none;
        border-color:#0055cc;
        box-shadow:0 0 8px rgba(0,85,204,0.3);
    }
    #requestForm button {
        background-color:#0055cc;
        color:white;
        border:none;
        padding:15px 25px;
        font-size:1.1em;
        font-weight:700;
        cursor:pointer;
        border-radius:30px;
        transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
    }
    #requestForm button:hover { background-color:#0077ff; transform:translateY(-2px); }

    #ai-assistant { display:none; position:fixed; top:0; left:0; width:100%; height:100vh; background:white; z-index:40; flex-direction:column; }
    #ai-assistant.active { display:flex; padding-top:170px; box-sizing:border-box; }
    #ai-chat-box { flex-grow:1; padding:15px; overflow-y:auto; background-color:#e8f0ff; display:flex; flex-direction:column; height:calc(100% - 140px); }
    #ai-input-area { display:flex; border-top:1px solid #ccc; padding:10px; background:white; align-items:center; }
    #ai-user-input { flex-grow:1; padding:10px; border:1px solid #aac4ff; border-radius:20px; margin-right:10px; font-size:1em; }
    #ai-send-button { background-color:#0055cc; color:white; border:none; border-radius:20px; padding:10px 15px; cursor:pointer; transition: background-color 0.3s; }
    #ai-send-button:hover { background-color:#0077ff; }

    .ai-message { background-color:#f0f5ff; padding:10px 15px; border-radius:15px 15px 15px 0; margin-bottom:10px; max-width:80%; align-self:flex-start; text-align:left; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    .user-message { background-color:#cfe3ff; margin-left:auto; align-self:flex-end; text-align:right; border-radius:15px 15px 0 15px; }
    .clear-btn { background-color:#ff6b6b; color:white; border:none; border-radius:15px; padding:8px 16px; cursor:pointer; font-weight:600; transition: all 0.3s; }
    .clear-btn:hover { background-color:#ff5252; }

    @media(max-width:768px) { #ai-assistant.active { padding-top:200px; } }

</style>
</head>
<body>

<header>
    <h1>Mahir Saruhan</h1>
    <h3>Okul Başkanlığı Adayı</h3>
    <nav>
        <button onclick="showSection('home')">Ana Sayfa</button>
        <button onclick="showSection('why-us')">Neden Bizi Seçmelisiniz</button>
        <button onclick="showSection('promises')">Vaatler</button>
        <button onclick="showSection('requests')">İstek/Dilekçe</button>
        <button onclick="showSection('ai-assistant')">📘 AI Yardımcısı</button>
    </nav>
</header>

<main>
    <section id="home" class="active">
        <h2>Okulumuzun Geleceği İçin Mahir Saruhan!</h2>
        <p>Mahir Saruhan'ın vizyonu, okulumuzu daha iyi, daha öğrenci dostu ve başarılı bir yer yapmaktır. **Değişim için oy verin!**</p>
    </section>

    <section id="why-us" class="hidden">
        <h2>Neden Mahir Saruhan?</h2>
        <ul>
            <li><strong>Takım Çalışması:</strong> İş birliği ile ortak çözümler üretir.</li>
            <li><strong>Gerçekçi Vaatler:</strong> Hayata geçirilebilir projeler sunar.</li>
            <li><strong>Dürüst ve Saygılı:</strong> Şeffaf ve eşit yönetim.</li>
            <li><strong>Öğrenci Görüşlerine Önem Verir:</strong> Anket ve toplantılarla sesinizi duyurur.</li>
            <li><strong>Sosyal Etkinlikleri Destekler:</strong> Kültürel ve sportif etkinlikler.</li>
            <li><strong>Liderlik Yeteneği:</strong> Doğru karar alır ve ekibine ilham verir.</li>
        </ul>
    </section>

    <section id="promises" class="hidden">
        <h2>Vaatler</h2>
        <div class="table-container">
            <table>
                <thead><tr><th>Vaat</th><th>Detay</th><th>Durum</th></tr></thead>
                <tbody>
                    <tr><td>Suya Kolay Ulaşım</td><td>Su fiyatları düşürülecek veya ücretsiz olacak</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Self Id Ödül Sistemi</td><td>Haftanın en çok puan alanına sürpriz hediyeler</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Top Sahaları</td><td>Sahalar oyun için kullanıma hazır olacak</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Okul Eşyalarının Tamiri</td><td>Kalorifer ve diğer eşyalar tamir edilecek</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Geri Dönüşüm Kutuları</td><td>Doğaya destek için okula kutular konulacak</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Web Sitesi Güncellemesi</td><td>Düzenli güncellemelerle öğrenciler bilgilendirilecek</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Tahtalara Format</td><td>Akıllı tahtalar hızlandırılacak</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Doğum Günü Panosu</td><td>Her ay doğum günü olan öğrenciler listelenecek</td><td>☐ Planlama Aşamasında</td></tr>
                    <tr><td>Oyun ve Resim Turnuvaları</td><td>Eğlenceli turnuvalar düzenlenecek</td><td>☐ Planlama Aşamasında</td></tr>
                </tbody>
            </table>
        </div>
    </section>

    <section id="requests" class="hidden">
        <h2>İstek/Dilekçe Kutusu</h2>
        <p>Öneri veya şikayetlerinizi Mahir'e iletin.</p>
        <div id="requestForm">
            <div class="form-group">
                <i class="fas fa-user"></i>
                <label for="name">Adınız:</label>
                <input type="text" id="name" placeholder="Adınız Soyadınız">
            </div>
            <div class="form-group">
                <i class="fas fa-envelope"></i>
                <label for="email">E-posta:</label>
                <input type="email" id="email" placeholder="ornek@mail.com">
            </div>
            <div class="form-group">
                <label for="message">Mesajınız:</label>
                <textarea id="message" required placeholder="Dilek veya öneriniz"></textarea>
            </div>
            <button onclick="submitForm()">Gönder</button>
        </div>
        <p id="formStatus" style="margin-top:15px;font-weight:bold;"></p>
    </section>
</main>

<section id="ai-assistant" class="hidden">
    <div id="ai-chat-box">
        <div class="ai-message">Merhaba! Ben Mahir. Ödevlerde ve derslerde yardımcı olabilirim.</div>
    </div>
    <div class="ai-controls">
        <button class="clear-btn" onclick="clearChat()">🗑️ Sohbeti Temizle</button>
    </div>
    <div id="ai-input-area">
        <input type="text" id="ai-user-input" placeholder="Sorunuzu yazın...">
        <button id="ai-send-button">Gönder</button>
    </div>
</section>

<footer>
    <p>&copy; 2025 Mahir Saruhan Okul Başkanlığı Kampanyası | #MahirKazandırır</p>
</footer>

<script>
let conversationHistory = [];

function updateMemoryStatus() { /* opsiyonel */ }

function clearChat() {
    if(confirm('Sohbet temizlensin mi?')) {
        conversationHistory = [];
        document.getElementById('ai-chat-box').innerHTML='<div class="ai-message">Merhaba! Ben Mahir. Ödevlerde ve derslerde yardımcı olabilirim.</div>';
    }
}

function showSection(id) {
    document.querySelectorAll('main section').forEach(s=>s.classList.add('hidden'));
    document.getElementById('ai-assistant').classList.add('hidden');
    document.getElementById('ai-assistant').classList.remove('active');
    document.querySelector('main').classList.remove('hidden');

    if(id==='ai-assistant'){
        document.getElementById('ai-assistant').classList.add('active');
        document.getElementById('ai-assistant').classList.remove('hidden');
        document.querySelector('main').classList.add('hidden');
    } else {
        const s=document.getElementById(id);
        if(s){ s.classList.remove('hidden'); s.classList.add('active'); }
    }
}

function submitForm(){
    const name=document.getElementById('name').value;
    const email=document.getElementById('email').value;
    const msg=document.getElementById('message').value;
    const status=document.getElementById('formStatus');
    if(!msg.trim()){ status.style.color='red'; status.textContent='Mesaj boş olamaz!'; return; }

    const data=new FormData();
    data.append('Ad',name); data.append('Gonderen_Mail_Adresi',email); data.append('Dilekce_Metni',msg);

    fetch('https://formspree.io/f/xdkwzjgn',{method:'POST', body:data, headers:{'Accept':'application/json'}})
    .then(r=>{ if(r.ok){ status.style.color='green'; status.textContent='Mesaj iletildi!'; document.getElementById('name').value=''; document.getElementById('email').value=''; document.getElementById('message').value=''; } else{ status.style.color='red'; status.textContent='Hata oluştu.';} })
    .catch(e=>{status.style.color='red'; status.textContent='Bağlantı hatası.';});

    setTimeout(()=>{ status.textContent=''; },6000);
}

document.addEventListener('DOMContentLoaded',()=>{
    showSection('home');

    const chatBox=document.getElementById('ai-chat-box');
    const userInput=document.getElementById('ai-user-input');
    const sendButton=document.getElementById('ai-send-button');

    function addMessage(text,isUser=false){
        const div=document.createElement('div');
        div.className=isUser?'ai-message user-message':'ai-message';
        div.textContent=text;
        chatBox.appendChild(div);
        chatBox.scrollTop=chatBox.scrollHeight;
    }

    async function sendMessage(){
        const prompt=userInput.value.trim(); if(prompt==='') return;
        addMessage(prompt,true);
        userInput.value='';
        sendButton.disabled=true;
        addMessage("Mahir düşünüyor...");
        const loading=chatBox.lastChild;

        try{
            const res=await fetch('/api/gemini',{method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({prompt,conversationHistory})});
            const data=await res.json();
            chatBox.removeChild(loading);
            if(res.ok){ addMessage(data.answer,false); if(data.conversationHistory){ conversationHistory=data.conversationHistory; } }
            else{ addMessage('Hata: '+(data.error||'Cevap alınamadı'),false);}
        } catch(err){ chatBox.removeChild(loading); addMessage("Sunucu hatası.",false); console.error(err);}
        finally{ sendButton.disabled=false; userInput.focus(); }
    }

    sendButton.addEventListener('click',sendMessage);
    userInput.addEventListener('keypress',e=>{if(e.key==='Enter'){sendMessage();}});
});
</script>

</body>
</html>
