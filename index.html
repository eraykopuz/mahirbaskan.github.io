<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mahir Saruhan - Okul Başkanlığı Adayı</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />

  <style>
    :root {
      --primary-color: #1A237E;
      --accent-color: #FFC107;
      --secondary-color: #ECEFF1;
      --text-color: #263238;
      --light-bg: #FFFFFF;
    }

    body {
      font-family: "Poppins", sans-serif;
      margin: 0;
      background: var(--secondary-color);
      color: var(--text-color);
    }

    header {
      background: var(--primary-color);
      color: var(--light-bg);
      text-align: center;
      padding: 20px 0;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header h1 {
      color: var(--accent-color);
      font-size: 2.6em;
      margin: 0.2em 0;
      font-weight: 900;
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      margin-top: 10px;
    }

    nav button {
      background: var(--accent-color);
      color: var(--primary-color);
      border: none;
      padding: 10px 18px;
      border-radius: 40px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    nav button:hover {
      background-color: #e6a200;
      transform: translateY(-2px);
    }

    main {
      background: var(--light-bg);
      max-width: 1000px;
      margin: 40px auto;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      min-height: 60vh;
    }

    section {
      display: none;
      padding: 20px 0;
    }

    section.active {
      display: block;
    }

    /* AI Asistanı Stilleri */
    #ai-assistant h2 {
      text-align: center;
      color: var(--primary-color);
    }

    #ai-chat-box {
      border: 1px solid #ddd;
      border-radius: 15px;
      height: 350px;
      overflow-y: auto;
      padding: 10px;
      background-color: #f9f9f9;
      margin-bottom: 15px;
    }

    .ai-message {
      background-color: #E3F2FD;
      padding: 10px 15px;
      border-radius: 15px 15px 15px 5px;
      margin-bottom: 10px;
      width: fit-content;
      max-width: 80%;
    }

    .user-message {
      background-color: #DCEDC8;
      border-radius: 15px 15px 5px 15px;
      align-self: flex-end;
      margin-left: auto;
    }

    #ai-input-area {
      display: flex;
      gap: 10px;
    }

    #ai-user-input {
      flex-grow: 1;
      border: 1px solid #ccc;
      border-radius: 25px;
      padding: 10px 15px;
      font-size: 1em;
    }

    #ai-send-button {
      background: var(--accent-color);
      color: var(--primary-color);
      border: none;
      border-radius: 25px;
      padding: 10px 20px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    #ai-send-button:hover {
      background: #e6a200;
    }

    footer {
      text-align: center;
      background: var(--primary-color);
      color: var(--secondary-color);
      padding: 20px 0;
      margin-top: 30px;
    }

    @media (max-width: 768px) {
      nav button {
        flex: 1 1 45%;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>MAHİR SARUHAN</h1>
    <h3>Okul Başkanlığı Adayı | #DeğişimMahir</h3>
    <nav>
      <button onclick="showSection('home')"><i class="fas fa-home"></i> Ana Sayfa</button>
      <button onclick="showSection('why-us')"><i class="fas fa-handshake"></i> Neden Biz?</button>
      <button onclick="showSection('promises')"><i class="fas fa-list-check"></i> Vaatler</button>
      <button onclick="showSection('requests')"><i class="fas fa-paper-plane"></i> İstek Kutusu</button>
      <button onclick="showSection('ai-assistant')"><i class="fas fa-robot"></i> AI Asistanı</button>
    </nav>
  </header>

  <main>
    <section id="home" class="active">
      <h2>Okulumuzun Geleceği İçin Güçlü Bir Liderlik!</h2>
      <p>
        Mahir Saruhan'ın vizyonu, okulumuzu daha iyi, daha öğrenci dostu bir yer yapmak.
      </p>
    </section>

    <section id="why-us">
      <h2>Neden Mahir Saruhan?</h2>
      <ul>
        <li>Takım çalışmasına önem verir.</li>
        <li>Gerçekçi ve uygulanabilir vaatler sunar.</li>
        <li>Şeffaf ve adil yönetim anlayışı.</li>
      </ul>
    </section>

    <section id="promises">
      <h2>Vaatler</h2>
      <p>Okulun her alanında iyileştirme çalışmaları yapılacak.</p>
    </section>

    <section id="requests">
      <h2>İstek Kutusu</h2>
      <p>Fikirlerinizi Mahir Saruhan’a ulaştırın!</p>
    </section>

    <!-- 💬 AI Asistan Sekmesi -->
    <section id="ai-assistant">
      <h2><i class="fas fa-robot"></i> Mahir AI Asistanı</h2>
      <div id="ai-chat-box">
        <div class="ai-message">
          Merhaba! Ben Mahir’in yapay zekâ destekli asistanıyım. Size okul projelerinde veya derslerde yardımcı olabilirim. 💡
        </div>
      </div>

      <div id="ai-input-area">
        <input type="text" id="ai-user-input" placeholder="Bir soru yazın..." />
        <button id="ai-send-button">Gönder</button>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Mahir Saruhan Kampanyası | #MahirKazandırır</p>
  </footer>

  <script>
    function showSection(id) {
      document.querySelectorAll("main section").forEach((sec) => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    const chatBox = document.getElementById("ai-chat-box");
    const userInput = document.getElementById("ai-user-input");
    const sendButton = document.getElementById("ai-send-button");

    function addMessage(text, isUser = false) {
      const div = document.createElement("div");
      div.className = isUser ? "ai-message user-message" : "ai-message";
      div.textContent = text;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function sendMessage() {
      const prompt = userInput.value.trim();
      if (!prompt) return;

      addMessage(prompt, true);
      userInput.value = "";
      addMessage("Asistan yazıyor...", false);
      const loading = chatBox.lastChild;

      try {
        const res = await fetch("/api/gemini", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: prompt }),
        });

        if (!res.ok) throw new Error("Sunucu hatası.");

        const data = await res.json();
        chatBox.removeChild(loading);
        addMessage(data.reply || "Yanıt alınamadı.", false);
      } catch (err) {
        chatBox.removeChild(loading);
        addMessage("❌ Bir hata oluştu. Lütfen tekrar deneyin.", false);
        console.error(err);
      }
    }

    sendButton.addEventListener("click", sendMessage);
    userInput.addEventListener("keypress", (e) => e.key === "Enter" && sendMessage());
  </script>
</body>
</html>
